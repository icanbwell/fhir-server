# This file is auto-generated by generate_classes so do not edit manually
{% macro lower_case_first_letter(text) %}
    {{- text[0]|lower}}{{text[1:] -}}
{% endmacro %}
{% macro upper_case_first_letter(text) %}
    {{- text[0]|upper}}{{text[1:] -}}
{% endmacro %}
{% for property in fhir_entity.properties_unique %}
    {% if property.type_ | replace(".","") != fhir_entity.cleaned_name %}
{#    # {{ property.name }} ({{ property.type_ }})#}
        {% if property.is_code %}
# import code from "../simple_types/code.graphql"
{#        {% elif property.is_basic_type %}#}
{#    from spark_auto_mapper_fhir.fhir_types.{{ property.type_snake_case }} import {{ property.cleaned_type | replace(".","")}}#}
        {% elif property.reference_target_resources %}
{#            we replace this with the target resource below#}
        {% elif property.is_resource %}
# import {{ property.type_ | replace(".","") }} from "../resources/{{ lower_case_first_letter(property.type_snake_case) }}.graphql"
        {% elif property.is_extension %}
# import {{ property.type_ | replace(".","") }} from "../extensions/{{ lower_case_first_letter(property.type_snake_case) }}.graphql"
        {% elif property.fhir_type == "BackboneElement" %}
# import {{ property.type_ | replace(".","") }} from "../backbone_elements/{{ lower_case_first_letter(property.type_snake_case) }}.graphql"
        {% elif property.is_complex or property.fhir_type == "Element" %}
# import {{ property.cleaned_type | replace(".","") }} from "../complex_types/{{ lower_case_first_letter(property.type_snake_case) }}.graphql"
        {% elif property.type_snake_case in ["string", "boolean", "integer", "positiveInt"] %}
{# do nothing since this is a GraphQL type            #}
        {%  else %}
# import {{ property.type_ | replace(".","") }} from "../simple_types/{{ lower_case_first_letter(property.type_snake_case) }}.graphql"
        {% endif %}
        {% if property.reference_target_resources %}
{## Imports for References for {{ property.name }}#}
            {% for reference_target_resource_name in property.reference_target_resources_names %}
# import {{ reference_target_resource_name }} from "../resources/{{ lower_case_first_letter(reference_target_resource_name) }}.graphql"
            {% endfor %}
        {% endif %}
    {% endif %}
{% endfor %}

{% for property in fhir_entity.properties %}
{% if not property.is_v2_supported %}
{% if property.reference_target_resources | length == 1 and property.reference_target_resources_names [0] == "Resource" %}
union {{fhir_entity.cleaned_name}}{{ upper_case_first_letter(property.name) }}{{ upper_case_first_letter(property.name_suffix) if property.name_suffix is not none }} = Account | ActivityDefinition | AdverseEvent | AllergyIntolerance | Appointment | AppointmentResponse | AuditEvent | Basic | Binary | BiologicallyDerivedProduct | BodyStructure | Bundle | CapabilityStatement | CarePlan | CareTeam | CatalogEntry | ChargeItem | ChargeItemDefinition | Claim | ClaimResponse | ClinicalImpression | CodeSystem | Communication | CommunicationRequest | CompartmentDefinition | Composition | ConceptMap | Condition | Consent | Contract | Coverage | CoverageEligibilityRequest | CoverageEligibilityResponse | DetectedIssue | Device | DeviceDefinition | DeviceMetric | DeviceRequest | DeviceUseStatement | DiagnosticReport | DocumentManifest | DocumentReference | EffectEvidenceSynthesis | Encounter | Endpoint | EnrollmentRequest | EnrollmentResponse | EpisodeOfCare | EventDefinition | Evidence | EvidenceVariable | ExampleScenario | ExplanationOfBenefit | FamilyMemberHistory | Flag | Goal | GraphDefinition | Group | GuidanceResponse | HealthcareService | ImagingStudy | Immunization | ImmunizationEvaluation | ImmunizationRecommendation | ImplementationGuide | InsurancePlan | Invoice | Library | Linkage | List | Location | Measure | MeasureReport | Media | Medication | MedicationAdministration | MedicationDispense | MedicationKnowledge | MedicationRequest | MedicationStatement | MedicinalProduct | MedicinalProductAuthorization | MedicinalProductContraindication | MedicinalProductIndication | MedicinalProductIngredient | MedicinalProductInteraction | MedicinalProductManufactured | MedicinalProductPackaged | MedicinalProductPharmaceutical | MedicinalProductUndesirableEffect | MessageDefinition | MessageHeader | MolecularSequence | NamingSystem | NutritionOrder | Observation | ObservationDefinition | OperationDefinition | OperationOutcome | Organization | OrganizationAffiliation | Patient | PaymentNotice | PaymentReconciliation | Person | PlanDefinition | Practitioner | PractitionerRole | Procedure | Provenance | Questionnaire | QuestionnaireResponse | RelatedPerson | RequestGroup | ResearchDefinition | ResearchElementDefinition | ResearchStudy | ResearchSubject | RiskAssessment | RiskEvidenceSynthesis | Schedule | SearchParameter | ServiceRequest | Slot | Specimen | SpecimenDefinition | StructureDefinition | StructureMap | Subscription | SubscriptionStatus | SubscriptionTopic | Substance | SubstanceNucleicAcid | SubstancePolymer | SubstanceProtein | SubstanceReferenceInformation | SubstanceSourceMaterial | SubstanceSpecification | SupplyDelivery | SupplyRequest | Task | TerminologyCapabilities | TestReport | TestScript | ValueSet | VerificationResult | VisionPrescription | Parameters | Resource

"""
Reference type for {{ upper_case_first_letter(property.name) }}
"""
type {{fhir_entity.cleaned_name}}{{ upper_case_first_letter(property.name) }}{{ upper_case_first_letter(property.name_suffix) if property.name_suffix is not none }}Reference {
    id: String
    extension: [Extension]
    reference: {{fhir_entity.cleaned_name}}{{ upper_case_first_letter(property.name) }}{{ upper_case_first_letter(property.name_suffix) if property.name_suffix is not none }}
    type: uri
    identifier: Identifier
    display: String
}

{% elif property.reference_target_resources | length > 1 %}
union {{fhir_entity.cleaned_name}}{{ upper_case_first_letter(property.name) }}{{ upper_case_first_letter(property.name_suffix) if property.name_suffix is not none }} = {{ property.reference_target_resources_names | unique | join(" | ") }}

"""
Reference type for {{ upper_case_first_letter(property.name) }}
"""
type {{fhir_entity.cleaned_name}}{{ upper_case_first_letter(property.name) }}{{ upper_case_first_letter(property.name_suffix) if property.name_suffix is not none }}Reference {
    id: String
    extension: [Extension]
    reference: {{fhir_entity.cleaned_name}}{{ upper_case_first_letter(property.name) }}{{ upper_case_first_letter(property.name_suffix) if property.name_suffix is not none }}
    type: uri
    identifier: Identifier
    display: String
}

{% elif property.reference_target_resources | length == 1 %}
"""
Reference type for {{ upper_case_first_letter(property.name) }}
"""
type {{fhir_entity.cleaned_name}}{{ upper_case_first_letter(property.name) }}{{ upper_case_first_letter(property.name_suffix) if property.name_suffix is not none }}Reference {
    id: String
    extension: [Extension]
    reference: {{ property.reference_target_resources_names [0] }}
    type: uri
    identifier: Identifier
    display: String
}

{%  endif %}
{% endif -%}
{% endfor %}

"""
{{fhir_entity.fhir_name}}
{% for documentation_item in fhir_entity.documentation %}
    {{ documentation_item | wordwrap(78) | replace('\n', '\n    ') | replace('\r', '\n    ') }}
{%  endfor %}
"""
type {{fhir_entity.cleaned_name}} {
{% for property in fhir_entity.properties %}
    {% if not property.is_v2_supported %}
    """
    {{ property.documentation[0] | wordwrap(78) | replace('\n', '\n    ') | replace('\r', '\n    ') }}
    """
    {{ property.name -}} {{ ': ' -}}
        {% if property.is_list -%}
            {{ '[' -}}
        {% endif -%}
        {% if property.cleaned_type == "Extension" %}
        {{- 'Extension' -}}
        {% elif property.is_code %}
        {{- 'code' -}}
        {% elif property.reference_target_resources -%}
            {{fhir_entity.cleaned_name}}{{ upper_case_first_letter(property.name) }}{{ upper_case_first_letter(property.name_suffix) if property.name_suffix is not none }}{{ "Reference" -}}
        {% else %}
        {{- property.cleaned_type | replace(".","") -}}
        {%  endif %}
        {% if property.is_list -%}
            {{ ']' -}}
        {% endif -%}
        {{ '' }}
    {% endif %}
{% endfor %}
}

