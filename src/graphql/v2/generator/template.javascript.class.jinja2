/* eslint-disable no-unused-vars */
// This file is auto-generated by generate_classes so do not edit manually
{% macro lower_case_first_letter(text) %}
    {{- text[0]|lower }}{{ text[1:] -}}
{% endmacro %}
{% macro upper_case_first_letter(text) %}
    {{- text[0]|upper }}{{ text[1:] -}}
{% endmacro %}

/**
{{ fhir_entity.fhir_name }}
{% for documentation_item in fhir_entity.documentation %}
    {{ documentation_item | wordwrap(78) | replace('\n', '\n    ') | replace('\r', '\n    ') }}
{% endfor %}
*/
class {{ fhir_entity.cleaned_name }} {
    constructor(
        {
{% for property in fhir_entity.properties %}
    {%  if property.name != property.javascript_clean_name %}
            '{{ property.name -}}': {{ property.javascript_clean_name -}},
    {%  else %}
            {{ property.name -}},
    {%  endif %}
{% endfor %}
        }
    ) {
        // Create an object to store all props
        Object.defineProperty(this, '__data', {
          value: {}
        }); // Define getters and setters as enumerable

{% for property in fhir_entity.properties %}
        /**
         * @description {{ property.documentation[0] | wordwrap(78) | replace('\n', '\n    ') | replace('\r', '\n    ') }}
         * @property {{- ' {' -}}
    {% if property.cleaned_type == "Extension" %}
        {{- 'Extension' -}}
    {% elif property.is_code %}
        {{- 'code' -}}
    {% else %}
        {{- property.cleaned_type | replace(".","") -}}
    {% endif %}
    {% if property.is_list -%}
        {{ '[]' -}}
    {% endif -%}
    {% if property.optional -%}
        {{ '|undefined' -}}
    {% endif %}
    {{- '}' }}
        {{ '*/' }}
        Object.defineProperty(this, '{{ property.name -}}', {
            enumerable: true,
            get: () => this.__data.{{ property.name -}},
            set: valueProvided => {
                if (valueProvided === undefined || valueProvided === null) {
                    return;
                }
    {% if property.is_resource %}
            {%  if property.cleaned_type != fhir_entity.cleaned_name %}
                let {{ property.cleaned_type | replace(".","") }} = require('../resources/{{ lower_case_first_letter(property.type_snake_case) }}.js');
            {%  endif %}
    {% elif property.is_code %}
    {% elif property.is_extension %}
            {%  if property.cleaned_type != fhir_entity.cleaned_name %}
                let {{ property.cleaned_type | replace(".","") }} = require('../extensions/{{ lower_case_first_letter(property.type_snake_case) }}.js');
            {%  endif %}
    {% elif property.fhir_type == "BackboneElement" %}
            {%  if property.cleaned_type != fhir_entity.cleaned_name %}
                let {{ property.cleaned_type | replace(".","") }} = require('../backbone_elements/{{ lower_case_first_letter(property.type_snake_case) }}.js');
            {%  endif %}
    {% elif property.is_complex or property.fhir_type == "Element" %}
            {%  if property.cleaned_type != fhir_entity.cleaned_name %}
                let {{ property.cleaned_type | replace(".","") }} = require('../complex_types/{{ lower_case_first_letter(property.type_snake_case) }}.js');
            {%  endif %}
{#        {% elif property.type_snake_case in ["string", "boolean", "integer", "positiveInt"] %}#}
{#                this.__data.{{ property.name }} = value;#}
    {% endif %}
    {%  if property.is_resource or property.is_extension or property.fhir_type == "BackboneElement" or property.is_complex or property.fhir_type == "Element" %}
            {% if property.is_list %}
                this.__data.{{ property.name }} = Array.isArray(valueProvided) ? valueProvided.map(v => new {{ property.cleaned_type | replace(".","") }}(v)) : [new {{ property.cleaned_type | replace(".","") }}(valueProvided)];
            {%  else %}
                this.__data.{{ property.name }} = new {{ property.cleaned_type | replace(".","") }}(valueProvided);
            {% endif %}
    {%  else %}
            {% if property.is_list %}
                this.__data.{{ property.name }} = Array.isArray(valueProvided) ? valueProvided.map(v => v) : [valueProvided];
            {%  else %}
                this.__data.{{ property.name }} = valueProvided;
            {% endif %}
    {%  endif %}
            }
        });

{% endfor %}
        Object.assign(this, {
{% for property in fhir_entity.properties %}
    {%  if property.name != property.javascript_clean_name %}
            '{{ property.name -}}': {{ property.javascript_clean_name -}},
    {%  else %}
            {{ property.name -}},
    {%  endif %}
{% endfor %}
        });

        // Define a default non-writable resourceType property

        Object.defineProperty(this, 'resourceType', {
            value: '{{ fhir_entity.cleaned_name }}',
            enumerable: true,
            writable: false
        });
    }

    static get resourceType() {
        return '{{ fhir_entity.cleaned_name }}';
    }

    toJSON() {
        return {
        {% if fhir_entity.is_resource %}
            resourceType: this.resourceType,
        {%  endif %}
{% for property in fhir_entity.properties %}
    {%  if property.is_resource or property.is_extension or property.fhir_type == "BackboneElement" or property.is_complex or property.fhir_type == "Element" %}
        {% if property.is_list %}
            {{ property.name -}}: this.{{ property.name }} && this.{{ property.name -}}.map(v => v.toJSON()),
        {%  else %}
            {{ property.name -}}: this.{{ property.name }} && this.{{ property.name -}}.toJSON(),
        {% endif %}
    {%  else %}
            {{ property.name -}}: this.{{ property.name -}},
    {% endif %}
{% endfor %}
        };
    }
}

module.exports = {{ fhir_entity.cleaned_name }};

